<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Money Plant â€” The Fortune Vine</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,400&family=DM+Sans:wght@300;400;500&family=Caveat:wght@600&display=swap" rel="stylesheet">
<style>
:root {
  --g0: #0a1f0e;
  --g1: #1a4a22;
  --g2: #2e7d44;
  --g3: #5aad6e;
  --g4: #a0d4a8;
  --y1: #c8e632;
  --y2: #96b818;
  --cream: #f2fbf3;
  --ink: #0d2410;
  --ink2: #3a6040;
  --white: #fff;
  --gold: #d4a520;
  --gold2: #f0c840;
  --card-r: 22px;
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; -webkit-tap-highlight-color:transparent; }
html { scroll-behavior: smooth; }

body {
  font-family: 'DM Sans', sans-serif;
  background: var(--cream);
  color: var(--ink);
  overflow-x: hidden;
  padding-bottom: calc(80px + var(--safe-bottom));
}

/* â”€â”€ HERO â”€â”€ */
.hero {
  min-height: 100svh;
  background: linear-gradient(168deg, #0a1f0e 0%, #123318 28%, #1e5c28 55%, #2d8040 78%, #4aaa60 92%, #7fd090 100%);
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  position: relative; overflow: hidden; padding: 40px 20px 64px;
}
.hero::before {
  content: '';
  position: absolute; inset: 0;
  background:
    radial-gradient(ellipse 60% 50% at 15% 80%, rgba(200,230,50,.12) 0%, transparent 65%),
    radial-gradient(ellipse 45% 40% at 85% 15%, rgba(46,125,68,.22) 0%, transparent 60%),
    radial-gradient(ellipse 80% 30% at 50% 100%, rgba(10,31,14,.6) 0%, transparent 70%);
}
/* Coin shimmer overlay */
.hero::after {
  content: '';
  position: absolute; inset: 0;
  background: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 40px,
    rgba(212,165,32,.025) 40px,
    rgba(212,165,32,.025) 41px
  );
}

.leaf-float { position: absolute; opacity: .06; user-select: none; pointer-events: none; }
.leaf-float:nth-child(1) { font-size: 140px; top: -24px; left: -28px; animation: floatL 10s ease-in-out infinite; }
.leaf-float:nth-child(2) { font-size: 80px; bottom: 36px; right: -10px; animation: floatL 8s ease-in-out infinite 3s; }
.leaf-float:nth-child(3) { font-size: 60px; top: 40%; left: 70%; animation: floatL 12s ease-in-out infinite 6s; }

@keyframes floatL { 0%,100%{transform:translateY(0)rotate(0deg)}50%{transform:translateY(-20px)rotate(8deg)} }

.brand-pill {
  display: inline-flex; align-items: center; gap: 8px;
  background: rgba(255,255,255,.1); border: 1px solid rgba(255,255,255,.2);
  border-radius: 50px; padding: 7px 18px;
  backdrop-filter: blur(8px); margin-bottom: 14px;
  position: relative; z-index: 2;
  animation: fadeUp .7s ease both;
}
.brand-pill span { font-size: 17px; color: #fff; font-family: 'DM Sans', sans-serif; font-weight: 500; }
.brand-pill .dot { width: 5px; height: 5px; background: var(--y1); border-radius: 50%; }
.brand-pill .italic { font-family: 'Playfair Display', serif; font-style: italic; color: var(--y1); letter-spacing: 1px; }

.hero-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(44px, 13vw, 68px);
  color: var(--white); text-align: center; line-height: 1.05;
  position: relative; z-index: 2;
  animation: fadeUp .85s ease .1s both;
}
.hero-title em { font-style: italic; color: var(--y1); }

/* Coin ring around hero image */
.hero-img-wrap {
  position: relative; z-index: 2; margin: 22px 0 10px;
  animation: fadeUp .95s ease .2s both;
}
.coin-ring {
  position: absolute; inset: -10px;
  border-radius: 50%;
  background: conic-gradient(
    var(--gold2) 0deg, var(--gold) 20deg, var(--gold2) 40deg,
    var(--gold) 60deg, var(--gold2) 80deg, var(--gold) 100deg,
    var(--gold2) 120deg, var(--gold) 140deg, var(--gold2) 160deg,
    var(--gold) 180deg, var(--gold2) 200deg, var(--gold) 220deg,
    var(--gold2) 240deg, var(--gold) 260deg, var(--gold2) 280deg,
    var(--gold) 300deg, var(--gold2) 320deg, var(--gold) 340deg, var(--gold2) 360deg
  );
  animation: spinRing 12s linear infinite;
  opacity: .7;
}
@keyframes spinRing { to { transform: rotate(360deg); } }
.coin-ring-inner {
  position: absolute; inset: 3px;
  border-radius: 50%;
  background: linear-gradient(168deg, #1a4a22, #0a1f0e);
}
.hero-img {
  width: 168px; height: 168px;
  border-radius: 50%;
  position: relative; flex-shrink: 0;
  overflow: hidden; box-shadow: 0 8px 40px rgba(0,0,0,.4);
}
.hero-img img { width: 100%; height: 100%; object-fit: cover; position: relative; z-index: 1; }
.hero-img-placeholder {
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  gap: 8px; width: 100%; height: 100%; position: absolute; inset: 0; z-index: 1;
}

.hero-sub {
  font-size: 14.5px; color: rgba(255,255,255,.65);
  text-align: center; max-width: 270px; line-height: 1.65;
  position: relative; z-index: 2;
  animation: fadeUp 1s ease .3s both;
}

/* Fortune badge */
.fortune-badge {
  display: inline-flex; align-items: center; gap: 6px;
  background: linear-gradient(135deg, rgba(212,165,32,.25), rgba(240,200,64,.15));
  border: 1px solid rgba(212,165,32,.4);
  border-radius: 50px; padding: 6px 16px;
  font-size: 12px; color: var(--gold2);
  font-family: 'Caveat', cursive; font-size: 14px;
  position: relative; z-index: 2; margin-top: 6px;
  animation: fadeUp 1.1s ease .4s both;
}

.hero-scroll {
  position: absolute; bottom: 24px; left: 50%; transform: translateX(-50%);
  z-index: 2; display: flex; flex-direction: column; align-items: center; gap: 5px;
  color: rgba(255,255,255,.4); font-size: 10px; letter-spacing: 2px; text-transform: uppercase;
  animation: scrollBounce 2s ease infinite;
}
@keyframes scrollBounce { 0%,100%{transform:translateX(-50%)translateY(0)}50%{transform:translateX(-50%)translateY(7px)} }

/* â”€â”€ STAT BAR â”€â”€ */
.quick-bar {
  background: var(--g0);
  display: flex; overflow-x: auto; padding: 16px 20px;
  gap: 0; scrollbar-width: none;
}
.quick-bar::-webkit-scrollbar { display: none; }
.qitem {
  display: flex; flex-direction: column; align-items: center; gap: 3px;
  flex: 0 0 20%; min-width: 64px;
}
.qitem-icon { font-size: 20px; }
.qitem-lbl { font-size: 8.5px; color: rgba(255,255,255,.45); text-transform: uppercase; letter-spacing: .8px; white-space: nowrap; }
.qitem-val { font-size: 12px; font-weight: 500; color: var(--y1); white-space: nowrap; }

/* â”€â”€ DIVIDER â”€â”€ */
.divider { height: 4px; background: linear-gradient(90deg, var(--g2), var(--y1), var(--gold)); border: none; }

/* â”€â”€ SECTION â”€â”€ */
.sec { padding: 36px 20px; }
.sec-lbl { font-family: 'Caveat', cursive; font-size: 15px; color: var(--g2); letter-spacing: 1px; }
.sec-title { font-family: 'Playfair Display', serif; font-size: 26px; color: var(--ink); line-height: 1.2; margin-top: 2px; }

/* â”€â”€ IDENTITY â”€â”€ */
.id-card {
  background: linear-gradient(140deg, var(--g1) 0%, #236e30 100%);
  border-radius: var(--card-r); padding: 24px 20px; color: white; margin-top: 18px;
  position: relative; overflow: hidden;
}
.id-card::after {
  content: 'ğŸ’°';
  position: absolute; right: -10px; bottom: -10px;
  font-size: 80px; opacity: .08;
}
.id-row { display: flex; align-items: flex-start; justify-content: space-between; gap: 10px; margin-bottom: 14px; }
.id-name { font-family: 'Playfair Display', serif; font-size: 24px; color: var(--gold2); }
.id-sci { font-style: italic; font-size: 12px; color: rgba(255,255,255,.55); margin-top: 2px; }
.id-badge { background: var(--gold2); color: var(--g0); font-size: 10.5px; font-weight: 700; padding: 5px 11px; border-radius: 20px; white-space: nowrap; flex-shrink: 0; }
.id-tags { display: flex; flex-wrap: wrap; gap: 7px; margin-bottom: 16px; }
.id-tag { background: rgba(255,255,255,.11); color: rgba(255,255,255,.82); font-size: 11.5px; padding: 4px 11px; border-radius: 20px; border: 1px solid rgba(255,255,255,.14); }
.id-desc { font-size: 13.5px; color: rgba(255,255,255,.72); line-height: 1.7; }

/* â”€â”€ STAT BARS â”€â”€ */
.stat-list { display: flex; flex-direction: column; gap: 13px; margin-top: 18px; }
.stat-row { display: flex; align-items: center; gap: 11px; }
.stat-ico { width: 38px; height: 38px; border-radius: 11px; display: flex; align-items: center; justify-content: center; font-size: 17px; flex-shrink: 0; }
.stat-info { flex: 1; }
.stat-name { font-size: 11px; color: var(--ink2); font-weight: 500; text-transform: uppercase; letter-spacing: .5px; margin-bottom: 4px; }
.stat-track { background: #d0e8d4; border-radius: 8px; height: 9px; overflow: hidden; }
.stat-fill { height: 100%; border-radius: 8px; width: 0%; transition: width 1.6s cubic-bezier(.22,1,.36,1); }
.stat-num { font-size: 12px; font-weight: 600; color: var(--ink); min-width: 34px; text-align: right; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MOOD DIARY CAROUSEL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.mood-sec { padding: 36px 0 0; overflow: hidden; }
.mood-header { padding: 0 20px 6px; }
.mood-intro { font-size: 13px; color: var(--ink2); line-height: 1.6; padding: 4px 20px 0; }

.pill-strip {
  display: flex; gap: 9px; padding: 18px 20px 0;
  overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none;
}
.pill-strip::-webkit-scrollbar { display: none; }

.mpill {
  display: flex; align-items: center; gap: 6px;
  padding: 8px 15px; border-radius: 50px;
  border: 1.5px solid #b8dcc0; background: white;
  cursor: pointer; white-space: nowrap;
  font-size: 12.5px; font-weight: 500; color: var(--ink2);
  transition: all .25s cubic-bezier(.34,1.56,.64,1);
  flex-shrink: 0; box-shadow: 0 2px 6px rgba(0,0,0,.04);
}
.mpill svg { width: 15px; height: 15px; flex-shrink: 0; }
.mpill.active {
  background: var(--g1); border-color: var(--g1);
  color: white; box-shadow: 0 4px 14px rgba(26,74,34,.28);
  transform: scale(1.05);
}

.carousel-outer { position: relative; margin-top: 18px; overflow: hidden; touch-action: pan-y; width: 100%; }
.carousel-track { display: flex; transition: transform .48s cubic-bezier(.77,0,.175,1); will-change: transform; }
.cslide { min-width: 100vw; width: 100vw; padding: 0 16px; flex-shrink: 0; box-sizing: border-box; }

.mcard { background: white; border-radius: var(--card-r); overflow: hidden; box-shadow: 0 6px 32px rgba(26,74,34,.1); }

.mmedia {
  position: relative; width: 100%; aspect-ratio: 1 / 1;
  overflow: hidden; cursor: pointer; background: #d0ecd4;
}
.mmedia-bg {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
}
.emo-happy  .mmedia-bg { background: linear-gradient(150deg,#b8f0c4,#d8fce0); }
.emo-sad    .mmedia-bg { background: linear-gradient(150deg,#c4dce8,#d8ecf8); }
.emo-angry  .mmedia-bg { background: linear-gradient(150deg,#f0d8b8,#fce8c8); }
.emo-sleepy .mmedia-bg { background: linear-gradient(150deg,#d0c8ec,#e4e0f8); }
.emo-loved  .mmedia-bg { background: linear-gradient(150deg,#b8e8c8,#d4f8e0); }
.emo-calm   .mmedia-bg { background: linear-gradient(150deg,#c0e8d0,#dcf8e8); }
.emo-thrive .mmedia-bg { background: linear-gradient(150deg,#d8f0a0,#eef8c8); }

.mmedia video {
  position: absolute; inset: 0; width: 100%; height: 100%;
  object-fit: cover; object-position: center; z-index: 2;
  background: transparent; display: none;
}
.mmedia.has-video video { display: block; }
.mmedia.has-video .mmedia-bg { display: none; }

.big-play { display: none !important; }

.vcontrols {
  position: absolute; bottom: 0; left: 0; right: 0; z-index: 9;
  background: linear-gradient(to top, rgba(0,0,0,.55) 0%, transparent 100%);
  padding: 28px 12px 10px;
  display: flex; align-items: center; gap: 10px;
  opacity: 1; pointer-events: all;
  transition: opacity .3s ease;
}
.mmedia:not(.show-ctrl):not(.paused-once) .vcbtn.pause-btn,
.mmedia:not(.show-ctrl):not(.paused-once) .vprogress-wrap { opacity: 0; pointer-events: none; }
.mmedia.show-ctrl .vcbtn.pause-btn,
.mmedia.show-ctrl .vprogress-wrap,
.mmedia.paused-once .vcbtn.pause-btn,
.mmedia.paused-once .vprogress-wrap { opacity: 1; pointer-events: all; }

.vcbtn {
  width: 34px; height: 34px; border-radius: 50%;
  border: none; background: rgba(255,255,255,.22);
  backdrop-filter: blur(6px); color: white;
  display: flex; align-items: center; justify-content: center;
  cursor: pointer; flex-shrink: 0;
  transition: background .2s ease;
}
.vcbtn:active { background: rgba(255,255,255,.38); transform: scale(.92); }
.vcbtn svg { width: 14px; height: 14px; }

.vprogress-wrap {
  flex: 1; height: 3px; background: rgba(255,255,255,.28);
  border-radius: 2px; overflow: hidden; cursor: pointer;
}
.vprogress-bar {
  height: 100%; background: white; border-radius: 2px; width: 0%;
  transition: width .1s linear; pointer-events: none;
}

.media-placeholder-txt {
  font-size: 11px; color: rgba(0,0,0,.28); text-align: center; line-height: 1.7;
  font-family: 'DM Sans', sans-serif; position: relative; z-index: 1;
}

.mcard-body { padding: 18px 18px 14px; }
.mcard-title {
  font-family: 'Playfair Display', serif; font-size: 18px; color: var(--ink);
  margin-bottom: 5px; display: flex; align-items: center; gap: 8px;
}
.mcard-title svg { width: 20px; height: 20px; flex-shrink: 0; }
.mcard-ctx { font-size: 13px; color: var(--ink2); line-height: 1.65; margin-bottom: 14px; }
.tips-list { display: flex; flex-direction: column; gap: 7px; }
.tip-row {
  display: flex; align-items: flex-start; gap: 9px;
  background: #f0faf2; border-radius: 11px;
  padding: 9px 11px; border-left: 3px solid var(--g3);
}
.tip-ico {
  width: 24px; height: 24px; border-radius: 7px;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; margin-top: 1px;
}
.tip-ico svg { width: 13px; height: 13px; }
.tip-txt { font-size: 12.5px; color: var(--ink2); line-height: 1.5; }
.tip-txt strong { color: var(--ink); font-weight: 600; }

.cdots { display: flex; justify-content: center; gap: 6px; padding: 16px 0 2px; }
.cdot {
  width: 6px; height: 6px; border-radius: 3px;
  background: #b0d8b8; transition: all .3s ease; cursor: pointer;
}
.cdot.active { width: 20px; background: var(--g2); }

/* â”€â”€ CARE CALENDAR â”€â”€ */
.cal-grid { display: grid; grid-template-columns: repeat(4,1fr); gap: 7px; margin-top: 18px; }
.cal-cell {
  background: white; border-radius: 13px; padding: 11px 7px;
  text-align: center; box-shadow: 0 1px 6px rgba(0,0,0,.05);
  border-top: 3px solid #ddd;
}
.cal-cell.active { border-top-color: var(--g3); background: #f0faf4; }
.cal-cell.peak { border-top-color: var(--y1); background: #f6fde8; }
.cal-mo { font-size: 9.5px; font-weight: 600; text-transform: uppercase; letter-spacing: .5px; color: var(--ink2); margin-bottom: 5px; }
.cal-ico { font-size: 18px; }
.cal-note { font-size: 8.5px; color: var(--ink2); margin-top: 3px; line-height: 1.3; }

/* â”€â”€ BENEFITS â”€â”€ */
.ben-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 18px; }
.ben-card { border-radius: 18px; padding: 16px 14px; }
.ben-ico { font-size: 22px; margin-bottom: 7px; }
.ben-title { font-weight: 600; font-size: 13.5px; margin-bottom: 3px; }
.ben-desc { font-size: 11.5px; line-height: 1.5; opacity: .72; }

/* â”€â”€ VASTU STRIP â”€â”€ */
.vastu-strip {
  background: linear-gradient(135deg, #0a1f0e, #1a4a22);
  border-radius: 18px; padding: 18px 18px; margin-top: 18px;
  display: flex; align-items: center; gap: 14px;
}
.vastu-coin { font-size: 36px; animation: coinSpin 4s ease-in-out infinite; }
@keyframes coinSpin { 0%,100%{transform:rotateY(0deg)}50%{transform:rotateY(180deg)} }
.vastu-text .vastu-title { font-family: 'Playfair Display', serif; font-size: 16px; color: var(--gold2); font-style: italic; }
.vastu-text .vastu-sub { font-size: 12px; color: rgba(255,255,255,.6); line-height: 1.55; margin-top: 4px; }

/* â”€â”€ DID YOU KNOW â”€â”€ */
.fact-list { display: flex; flex-direction: column; gap: 10px; margin-top: 18px; }
.fact-card {
  background: white; border-radius: 18px; padding: 14px 16px;
  display: flex; align-items: flex-start; gap: 12px;
  box-shadow: 0 2px 12px rgba(46,125,68,.06);
  border-left: 4px solid var(--g3);
  transform: translateX(-18px); opacity: 0;
  transition: transform .5s ease, opacity .5s ease;
}
.fact-card.vis { transform: translateX(0); opacity: 1; }
.fact-card:nth-child(2) { border-left-color: var(--gold); transition-delay: .07s; }
.fact-card:nth-child(3) { border-left-color: #5baae8; transition-delay: .14s; }
.fact-card:nth-child(4) { border-left-color: #8a70e8; transition-delay: .21s; }
.fact-card:nth-child(5) { border-left-color: #e87a5a; transition-delay: .28s; }
.fact-emo { width: 44px; height: 44px; border-radius: 13px; display: flex; align-items: center; justify-content: center; font-size: 22px; flex-shrink: 0; }
.fact-lbl { font-size: 9.5px; font-weight: 700; text-transform: uppercase; letter-spacing: .9px; color: var(--ink2); margin-bottom: 3px; }
.fact-txt { font-size: 13px; color: var(--ink); line-height: 1.58; }
.fact-txt strong { color: var(--g1); }

/* â”€â”€ ADOPT SECTION â”€â”€ */
.adopt-sec {
  background: linear-gradient(160deg, #0a1f0e 0%, #1a4a22 40%, #2e7d44 70%, #4aaa60 100%);
  padding: 52px 22px 60px; text-align: center; position: relative; overflow: hidden;
}
.adopt-sec::before {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(ellipse 60% 50% at 50% 110%, rgba(212,165,32,.15) 0%, transparent 65%);
}
.adopt-sway { font-size: 64px; display: inline-block; animation: sway 4s ease-in-out infinite; position: relative; z-index: 1; }
@keyframes sway { 0%,100%{transform:rotate(-4deg)}50%{transform:rotate(4deg)} }
.adopt-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(26px,8vw,40px); color: white; line-height: 1.2; margin-top: 14px;
  position: relative; z-index: 1;
}
.adopt-title em { font-style: italic; color: var(--gold2); }
.adopt-sub { font-size: 13.5px; color: rgba(255,255,255,.6); max-width: 280px; margin: 12px auto 10px; line-height: 1.7; position: relative; z-index: 1; }
.adopt-quote { font-family: 'Caveat', cursive; font-size: 15px; color: rgba(255,255,255,.38); margin-bottom: 28px; position: relative; z-index: 1; }
.adopt-btn {
  background: linear-gradient(135deg, var(--gold2), #a08010);
  border: none; border-radius: 50px; padding: 16px 44px;
  font-family: 'Playfair Display', serif; font-size: 19px;
  font-style: italic; color: #071e08; font-weight: 700;
  cursor: pointer; box-shadow: 0 8px 28px rgba(212,165,32,.38);
  letter-spacing: .4px; -webkit-tap-highlight-color: transparent;
  transition: transform .15s ease; position: relative; z-index: 1;
}
.adopt-btn:active { transform: scale(.96); }
.adopt-hint { font-size: 10px; color: rgba(255,255,255,.25); margin-top: 14px; letter-spacing: 1px; position: relative; z-index: 1; }

/* â”€â”€ FOOTER RATING â”€â”€ */
.footer-rating {
  background: var(--g0); padding: 28px 24px calc(28px + var(--safe-bottom));
  text-align: center;
}
.fr-title { font-family: 'Playfair Display', serif; font-size: 17px; color: var(--gold2); margin-bottom: 14px; font-style: italic; }
.fr-stars { display: flex; gap: 10px; justify-content: center; margin-bottom: 14px; }
.fr-star {
  font-size: 30px; background: none; border: none; cursor: pointer;
  filter: grayscale(1) opacity(.3); transition: filter .15s ease, transform .15s ease;
  line-height: 1; -webkit-tap-highlight-color: transparent;
}
.fr-star.lit { filter: grayscale(0) opacity(1); }
.fr-star:active { transform: scale(1.25); }
.fr-input {
  width: 100%; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.14);
  border-radius: 14px; padding: 11px 15px; font-size: 13.5px;
  font-family: 'DM Sans', sans-serif; color: white; resize: none;
  outline: none; line-height: 1.5; min-height: 72px; max-height: 140px;
  transition: border-color .2s ease; margin-bottom: 12px;
}
.fr-input::placeholder { color: rgba(255,255,255,.3); }
.fr-input:focus { border-color: var(--g3); background: rgba(255,255,255,.11); }
.fr-submit {
  background: linear-gradient(135deg, var(--g2), var(--g1));
  border: none; border-radius: 12px; padding: 13px 32px;
  font-family: 'Playfair Display', serif; font-style: italic;
  font-size: 15px; color: white; cursor: pointer;
  box-shadow: 0 3px 14px rgba(46,125,68,.3); width: 100%;
  transition: opacity .2s ease;
}
.fr-submit:active { opacity: .85; }
.fr-thanks { display: none; flex-direction: column; align-items: center; gap: 8px; }
.fr-thanks-ico { font-size: 44px; animation: popIn .4s cubic-bezier(.34,1.56,.64,1); }
.fr-thanks-title { font-family: 'Playfair Display', serif; font-size: 20px; color: var(--gold2); font-style: italic; }
.fr-thanks-sub { font-size: 13px; color: rgba(255,255,255,.55); }
@keyframes popIn { from{transform:scale(0);opacity:0} to{transform:scale(1);opacity:1} }

/* â”€â”€ FLOATING CHAT BUTTON â”€â”€ */
.chat-fab {
  position: fixed; bottom: calc(22px + var(--safe-bottom)); right: 18px; z-index: 900;
  width: 56px; height: 56px; border-radius: 50%;
  background: linear-gradient(135deg, var(--g2), var(--g1));
  border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 6px 24px rgba(26,74,34,.45);
  transition: transform .2s cubic-bezier(.34,1.56,.64,1), box-shadow .2s ease;
  -webkit-tap-highlight-color: transparent;
}
.chat-fab:active { transform: scale(.92); }
.chat-fab svg { width: 26px; height: 26px; color: white; }
.fab-badge {
  position: absolute; top: -3px; right: -3px;
  width: 16px; height: 16px; border-radius: 50%;
  background: var(--gold2); border: 2px solid white;
  animation: fabPulse 2s ease infinite;
}
@keyframes fabPulse { 0%,100%{transform:scale(1)}50%{transform:scale(1.18)} }

/* â”€â”€ CHAT PANEL â”€â”€ */
.chat-panel {
  position: fixed; bottom: 0; right: 0; left: 0; z-index: 950;
  background: white; border-radius: 24px 24px 0 0;
  box-shadow: 0 -8px 48px rgba(0,0,0,.18);
  display: flex; flex-direction: column;
  max-height: 85svh; height: 85svh;
  transform: translateY(100%);
  transition: transform .4s cubic-bezier(.22,1,.36,1);
  will-change: transform;
}
.chat-panel.open { transform: translateY(0); }
.chat-handle-bar { width: 40px; height: 4px; background: #c0d8c4; border-radius: 2px; margin: 12px auto 0; flex-shrink: 0; }
.chat-phead {
  display: flex; align-items: center; gap: 12px;
  padding: 14px 18px; flex-shrink: 0; border-bottom: 1px solid #e8f4ec;
}
.chat-pav {
  width: 40px; height: 40px; border-radius: 50%;
  background: linear-gradient(135deg, var(--g2), var(--g1));
  display: flex; align-items: center; justify-content: center;
  font-size: 19px; flex-shrink: 0;
}
.chat-pname { font-family: 'Playfair Display', serif; font-size: 16px; color: var(--ink); font-style: italic; }
.chat-pstatus { font-size: 10.5px; color: var(--g2); display: flex; align-items: center; gap: 4px; margin-top: 1px; }
.pstatus-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--g3); animation: statusPulse 2s ease infinite; }
@keyframes statusPulse { 0%,100%{opacity:1}50%{opacity:.35} }
.chat-close {
  margin-left: auto; background: #edf4ef; border: none;
  width: 30px; height: 30px; border-radius: 50%;
  display: flex; align-items: center; justify-content: center; cursor: pointer; flex-shrink: 0;
}
.chat-close svg { width: 14px; height: 14px; color: var(--ink2); }
.chat-msgs {
  flex: 1; overflow-y: auto; padding: 16px 14px;
  display: flex; flex-direction: column; gap: 10px;
  background: #f4fbf5; scroll-behavior: smooth;
}
.chat-msgs::-webkit-scrollbar { width: 2px; }
.chat-msgs::-webkit-scrollbar-thumb { background: #b0d8b8; border-radius: 1px; }
.cmsg { display: flex; gap: 7px; align-items: flex-end; animation: msgPop .3s cubic-bezier(.34,1.56,.64,1) both; }
@keyframes msgPop { from{opacity:0;transform:translateY(8px)scale(.96)}to{opacity:1;transform:translateY(0)scale(1)} }
.cmsg.bot { flex-direction: row; }
.cmsg.user { flex-direction: row-reverse; }
.cmsg-av { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 13px; flex-shrink: 0; }
.cmsg.bot .cmsg-av { background: var(--g3); }
.cmsg.user .cmsg-av { background: var(--gold2); }
.cmsg-bbl { max-width: 80%; padding: 9px 13px; border-radius: 16px; font-size: 13px; line-height: 1.55; }
.cmsg.bot .cmsg-bbl { background: white; color: var(--ink); border-bottom-left-radius: 3px; box-shadow: 0 1px 8px rgba(0,0,0,.06); }
.cmsg.user .cmsg-bbl { background: var(--g1); color: white; border-bottom-right-radius: 3px; }
.typing-dots { display: flex; gap: 4px; padding: 3px 1px; }
.typing-dots span { width: 6px; height: 6px; background: var(--g2); border-radius: 50%; animation: typBounce 1.2s ease infinite; }
.typing-dots span:nth-child(2){animation-delay:.2s} .typing-dots span:nth-child(3){animation-delay:.4s}
@keyframes typBounce {0%,60%,100%{transform:translateY(0);opacity:.45}30%{transform:translateY(-6px);opacity:1}}
.quick-qs { display: flex; flex-wrap: wrap; gap: 6px; padding: 8px 14px 0; background: #f4fbf5; flex-shrink: 0; }
.qq {
  background: white; border: 1.5px solid #b8d8c0; border-radius: 18px; padding: 5px 11px;
  font-size: 11px; color: var(--g2); cursor: pointer; font-weight: 500; white-space: nowrap;
  transition: all .18s ease;
}
.qq:active { background: var(--g1); color: white; border-color: var(--g1); transform: scale(.96); }
.chat-input-row {
  display: flex; gap: 9px; padding: 12px 14px calc(12px + var(--safe-bottom));
  background: white; border-top: 1px solid #e0f0e4; align-items: flex-end; flex-shrink: 0;
}
.chat-inp {
  flex: 1; border: 1.5px solid #b8d8c0; border-radius: 16px;
  padding: 9px 14px; font-size: 14px; font-family: 'DM Sans', sans-serif;
  color: var(--ink); resize: none; outline: none;
  min-height: 42px; max-height: 96px; line-height: 1.4;
  background: #f4fbf5; transition: border-color .2s ease;
}
.chat-inp:focus { border-color: var(--g2); background: white; }
.chat-inp::placeholder { color: #7ab888; }
.chat-send {
  width: 42px; height: 42px; border-radius: 50%;
  background: var(--g1); border: none; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; transition: transform .2s ease;
}
.chat-send:active { transform: scale(.92); }
.chat-send svg { width: 18px; height: 18px; color: white; margin-left: 2px; }
.chat-send:disabled { opacity: .45; cursor: not-allowed; transform: none; }

.chat-backdrop {
  position: fixed; inset: 0; z-index: 940;
  background: rgba(0,0,0,.35); backdrop-filter: blur(2px);
  opacity: 0; pointer-events: none; transition: opacity .35s ease;
}
.chat-backdrop.show { opacity: 1; pointer-events: all; }

/* â”€â”€ ADOPT MODAL â”€â”€ */
.modal-wrap {
  position: fixed; inset: 0; z-index: 1000;
  background: rgba(0,0,0,.72); display: none;
  align-items: flex-end; justify-content: center; padding: 0;
}
.modal-wrap.show { display: flex; }
.modal-box {
  background: linear-gradient(160deg,#1a4a22,#2e7d44);
  border-radius: 24px 24px 0 0; padding: 32px 28px calc(32px + var(--safe-bottom));
  width: 100%; max-width: 480px; text-align: center;
  border: 1px solid rgba(255,255,255,.1);
  animation: slideUp .38s cubic-bezier(.34,1.56,.64,1) both;
}
@keyframes slideUp { from{transform:translateY(100%)}to{transform:translateY(0)} }
.modal-ico { font-size: 52px; margin-bottom: 14px; }
.modal-title { font-family:'Playfair Display',serif; font-size:26px; color:var(--gold2); font-style:italic; margin-bottom:8px; }
.modal-body { font-family:'Caveat',cursive; font-size:16px; color:rgba(255,255,255,.68); line-height:1.65; margin-bottom:10px; }
.modal-brand { font-size:10px; color:rgba(255,255,255,.25); letter-spacing:1.5px; margin-bottom:22px; }
.modal-close { background:var(--gold2); border:none; border-radius:50px; padding:11px 34px; font-family:'DM Sans',sans-serif; font-size:13.5px; font-weight:600; color:var(--g0); cursor:pointer; }

@keyframes fadeUp { from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)} }
</style>
</head>
<body>

<!-- HERO -->
<section class="hero">
  <div class="leaf-float">ğŸƒ</div>
  <div class="leaf-float">ğŸ’š</div>
  <div class="leaf-float">ğŸŒ¿</div>

  <div class="brand-pill">
    <span>Urban</span>
    <div class="dot"></div>
    <span class="italic">Farmer</span>
  </div>

  <h1 class="hero-title">Meet <em>Money Plant</em></h1>

  <div class="hero-img-wrap">
    <div class="coin-ring"></div>
    <div class="coin-ring-inner"></div>
    <div class="hero-img">
      <img src="MoneyPlant.jpg" alt="Money Plant"
        onerror="this.style.display='none';document.getElementById('hero-ph').style.display='flex'">
      <div class="hero-img-placeholder" id="hero-ph" style="display:none;">
        <svg width="38" height="38" viewBox="0 0 48 48" fill="none" style="opacity:.28"><rect x="6" y="6" width="36" height="36" rx="4" stroke="white" stroke-width="2"/><circle cx="18" cy="20" r="5" stroke="white" stroke-width="2"/><path d="M6 34L16 26L24 32L32 22L42 34" stroke="white" stroke-width="2" stroke-linejoin="round"/></svg>
        <span style="font-size:9px;color:rgba(255,255,255,.35);text-transform:uppercase;letter-spacing:1px;text-align:center;line-height:1.8;">Place<br>Money Plant<br>Image</span>
      </div>
    </div>
  </div>

  <p class="hero-sub">The fortune vine â€” thrives in neglect, cleans your air, and brings luck to every home. ğŸƒ</p>
  <div class="fortune-badge">ğŸ’° Attracts Prosperity & Positive Energy</div>
  <div class="hero-scroll"><span>Scroll</span><span style="font-size:18px">â†“</span></div>
</section>

<!-- QUICK BAR -->
<div class="quick-bar">
  <div class="qitem"><span class="qitem-icon">ğŸŒ‘</span><span class="qitem-lbl">Sunlight</span><span class="qitem-val">Lowâ€“Bright</span></div>
  <div class="qitem"><span class="qitem-icon">ğŸ’§</span><span class="qitem-lbl">Water</span><span class="qitem-val">1x Week</span></div>
  <div class="qitem"><span class="qitem-icon">ğŸŒ¡ï¸</span><span class="qitem-lbl">Temp</span><span class="qitem-val">15â€“30Â°C</span></div>
  <div class="qitem"><span class="qitem-icon">ğŸª´</span><span class="qitem-lbl">Pot / Jar</span><span class="qitem-val">Anything!</span></div>
  <div class="qitem"><span class="qitem-icon">â­</span><span class="qitem-lbl">Care</span><span class="qitem-val">Very Easy</span></div>
</div>

<!-- IDENTITY -->
<section class="sec">
  <div class="sec-lbl">Who am I?</div>
  <div class="sec-title">My Identity Card</div>
  <div class="id-card">
    <div class="id-row">
      <div><div class="id-name">Money Plant / Pothos</div><div class="id-sci">Epipremnum aureum</div></div>
      <div class="id-badge">Fortune Vine ğŸ’°</div>
    </div>
    <div class="id-tags">
      <span class="id-tag">ğŸƒ Trailing Vine</span>
      <span class="id-tag">ğŸŒ SE Asian Origin</span>
      <span class="id-tag">â™¾ï¸ Perennial</span>
      <span class="id-tag">ğŸ’¨ Air Purifier</span>
      <span class="id-tag">ğŸ  Vastu Approved</span>
    </div>
    <p class="id-desc">The ultimate beginner plant and Vastu favourite â€” celebrated for bringing prosperity, good luck and positive energy. Grows in water, soil or hanging baskets. Purifies indoor air by removing benzene, formaldehyde and COâ‚‚. Practically indestructible! ğŸƒ</p>
  </div>

  <!-- Vastu strip -->
  <div class="vastu-strip">
    <div class="vastu-coin">ğŸ’°</div>
    <div class="vastu-text">
      <div class="vastu-title">Vastu & Feng Shui Superstar</div>
      <div class="vastu-sub">Place in the south-east corner to activate the wealth zone. Avoid the bedroom and north-east. Braided stems in a pot of 5 â€” considered most auspicious!</div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- STAT BARS -->
<section class="sec">
  <div class="sec-lbl">My Stats</div>
  <div class="sec-title">Growth Profile</div>
  <div class="stat-list">
    <div class="stat-row">
      <div class="stat-ico" style="background:#edfaf0;">ğŸŒ‘</div>
      <div class="stat-info"><div class="stat-name">Low Light Tolerance</div><div class="stat-track"><div class="stat-fill" data-w="92" style="background:linear-gradient(90deg,#2e7d44,#1a4a22)"></div></div></div>
      <div class="stat-num">9.2/10</div>
    </div>
    <div class="stat-row">
      <div class="stat-ico" style="background:#e8f2ff;">ğŸ’§</div>
      <div class="stat-info"><div class="stat-name">Drought Tolerance</div><div class="stat-track"><div class="stat-fill" data-w="88" style="background:linear-gradient(90deg,#5baae8,#3a7fc1)"></div></div></div>
      <div class="stat-num">8.8/10</div>
    </div>
    <div class="stat-row">
      <div class="stat-ico" style="background:#f6fde8;">ğŸŒ±</div>
      <div class="stat-info"><div class="stat-name">Growth Speed</div><div class="stat-track"><div class="stat-fill" data-w="80" style="background:linear-gradient(90deg,#8dc820,#5a9010)"></div></div></div>
      <div class="stat-num">8/10</div>
    </div>
    <div class="stat-row">
      <div class="stat-ico" style="background:#fdf8e0;">ğŸ’¨</div>
      <div class="stat-info"><div class="stat-name">Air Purification</div><div class="stat-track"><div class="stat-fill" data-w="90" style="background:linear-gradient(90deg,#d4a520,#a08010)"></div></div></div>
      <div class="stat-num">9/10</div>
    </div>
    <div class="stat-row">
      <div class="stat-ico" style="background:#edfaf0;">ğŸ†•</div>
      <div class="stat-info"><div class="stat-name">Beginner Friendliness</div><div class="stat-track"><div class="stat-fill" data-w="100" style="background:linear-gradient(90deg,#4aaa60,#1a4a22)"></div></div></div>
      <div class="stat-num">10/10</div>
    </div>
  </div>
</section>

<hr class="divider">

<!-- MOOD DIARY CAROUSEL -->
<section class="mood-sec">
  <div class="mood-header">
    <div class="sec-lbl">Money Plant Speaks</div>
    <div class="sec-title">My Mood Diary</div>
  </div>
  <p class="mood-intro">Swipe moods â€” video autoplays muted. Tap to pause/play, tap ğŸ”‡ to unmute.</p>
  <div class="pill-strip" id="pillStrip"></div>
  <div class="carousel-outer" id="carouselOuter">
    <div class="carousel-track" id="carouselTrack"></div>
  </div>
  <div class="cdots" id="cdots"></div>
</section>

<hr class="divider">

<!-- CARE CALENDAR -->
<section class="sec">
  <div class="sec-lbl">When to do what?</div>
  <div class="sec-title">Care Calendar</div>
  <div class="cal-grid">
    <div class="cal-cell active"><div class="cal-mo">Jan</div><div class="cal-ico">âœ‚ï¸</div><div class="cal-note">Prune leggy stems</div></div>
    <div class="cal-cell active"><div class="cal-mo">Feb</div><div class="cal-ico">ğŸŒ±</div><div class="cal-note">Start new cuttings</div></div>
    <div class="cal-cell peak"><div class="cal-mo">Mar</div><div class="cal-ico">ğŸš€</div><div class="cal-note">Growth spurt!</div></div>
    <div class="cal-cell peak"><div class="cal-mo">Apr</div><div class="cal-ico">ğŸƒ</div><div class="cal-note">Repot if rootbound</div></div>
    <div class="cal-cell peak"><div class="cal-mo">May</div><div class="cal-ico">ğŸ’š</div><div class="cal-note">Fertilise monthly</div></div>
    <div class="cal-cell active"><div class="cal-mo">Jun</div><div class="cal-ico">ğŸŒ§ï¸</div><div class="cal-note">Reduce watering</div></div>
    <div class="cal-cell"><div class="cal-mo">Jul</div><div class="cal-ico">ğŸ’§</div><div class="cal-note">Humid & warm</div></div>
    <div class="cal-cell active"><div class="cal-mo">Aug</div><div class="cal-ico">âœ‚ï¸</div><div class="cal-note">Trim long vines</div></div>
    <div class="cal-cell peak"><div class="cal-mo">Sep</div><div class="cal-ico">ğŸŒ¿</div><div class="cal-note">2nd growth push</div></div>
    <div class="cal-cell peak"><div class="cal-mo">Oct</div><div class="cal-ico">ğŸƒ</div><div class="cal-note">Best propagation</div></div>
    <div class="cal-cell active"><div class="cal-mo">Nov</div><div class="cal-ico">ğŸ’¡</div><div class="cal-note">Boost light hours</div></div>
    <div class="cal-cell"><div class="cal-mo">Dec</div><div class="cal-ico">ğŸŒ™</div><div class="cal-note">Less water, rest</div></div>
  </div>
  <div style="display:flex;gap:14px;margin-top:12px;font-size:10.5px;color:var(--ink2);">
    <span style="display:flex;align-items:center;gap:4px;"><span style="width:10px;height:10px;border-radius:2px;background:var(--y1);display:inline-block;"></span>Peak</span>
    <span style="display:flex;align-items:center;gap:4px;"><span style="width:10px;height:10px;border-radius:2px;background:var(--g3);display:inline-block;"></span>Active</span>
    <span style="display:flex;align-items:center;gap:4px;"><span style="width:10px;height:10px;border-radius:2px;background:#ddd;display:inline-block;"></span>Rest</span>
  </div>
</section>

<hr class="divider">

<!-- BENEFITS -->
<section class="sec">
  <div class="sec-lbl">Why do I matter?</div>
  <div class="sec-title">My Superpowers</div>
  <div class="ben-grid">
    <div class="ben-card" style="background:#edfaf0;color:#0d2410;"><div class="ben-ico">ğŸ’¨</div><div class="ben-title">Air Purifier</div><div class="ben-desc">NASA-tested: removes benzene, formaldehyde & xylene from indoor air.</div></div>
    <div class="ben-card" style="background:#f6fde8;color:#2a3a0a;"><div class="ben-ico">ğŸ’°</div><div class="ben-title">Wealth Magnet</div><div class="ben-desc">Vastu & Feng Shui recommend it for activating south-east wealth zones.</div></div>
    <div class="ben-card" style="background:#e8f0ff;color:#1a2e4a;"><div class="ben-ico">ğŸ§˜</div><div class="ben-title">Stress Buster</div><div class="ben-desc">Studies show indoor plants cut anxiety levels. Money plant is the top pick.</div></div>
    <div class="ben-card" style="background:#fdf8e0;color:#3a2e0a;"><div class="ben-ico">ğŸŒ±</div><div class="ben-title">Easy Propagation</div><div class="ben-desc">A single stem cutting in water roots in 10â€“14 days. Share the fortune!</div></div>
    <div class="ben-card" style="background:#f5e8ff;color:#3a1a4a;"><div class="ben-ico">ğŸ˜´</div><div class="ben-title">Better Sleep</div><div class="ben-desc">Releases Oâ‚‚ at night â€” improves sleep quality when placed in living rooms.</div></div>
    <div class="ben-card" style="background:#ffe8e8;color:#4a1a1a;"><div class="ben-ico">ğŸ¡</div><div class="ben-title">DÃ©cor Star</div><div class="ben-desc">Trails beautifully in hanging pots, climbs moss poles, or floats in glass jars.</div></div>
  </div>
</section>

<hr class="divider">

<!-- DID YOU KNOW -->
<section class="sec">
  <div class="sec-lbl">Psstâ€¦ secrets!</div>
  <div class="sec-title">Did You Know?</div>
  <div class="fact-list">
    <div class="fact-card"><div class="fact-emo" style="background:#edfaf0;">ğŸŒŠ</div><div><div class="fact-lbl">Water Grower</div><div class="fact-txt">Money plant can live <strong>entirely in water</strong> â€” just put a healthy cutting in a jar, change water weekly and watch it thrive!</div></div></div>
    <div class="fact-card"><div class="fact-emo" style="background:#fdf8e0;">ğŸƒ</div><div><div class="fact-lbl">Variegation Secret</div><div class="fact-txt">The golden-yellow patches on leaves (variegation) fade in low light. <strong>Bright indirect light brings back the gold!</strong></div></div></div>
    <div class="fact-card"><div class="fact-emo" style="background:#e8f0ff;">ğŸ§¬</div><div><div class="fact-lbl">NASA Approved</div><div class="fact-txt">Listed in <strong>NASA's Clean Air Study</strong> â€” one of the most effective plants for removing indoor air toxins.</div></div></div>
    <div class="fact-card"><div class="fact-emo" style="background:#f5e8ff;">ğŸ”¢</div><div><div class="fact-lbl">Lucky 5</div><div class="fact-txt">Feng Shui recommends <strong>5 braided stems</strong> representing the 5 feng shui elements â€” bringing balanced prosperity.</div></div></div>
    <div class="fact-card"><div class="fact-emo" style="background:#ffe8e8;">âš ï¸</div><div><div class="fact-lbl">Keep Away from Pets</div><div class="fact-txt">Beautiful but <strong>toxic to cats and dogs</strong> if eaten. Keep out of reach of pets â€” the sap causes oral irritation.</div></div></div>
  </div>
</section>

<hr class="divider">

<!-- ADOPT -->
<section class="adopt-sec">
  <div class="adopt-sway">ğŸƒ</div>
  <h2 class="adopt-title">Take me home.<br><em>I'll grow your fortune</em><br>leaf by leaf.</h2>
  <p class="adopt-sub">I'll clean your air, fill your shelves with trailing vines, and bring positive energy to every corner of your home.</p>
  <p class="adopt-quote">"Where a money plant grows, prosperity flows." â€” Ancient Vastu wisdom</p>
  <button class="adopt-btn" onclick="openAdopt()">Adopt Me ğŸƒ</button>
  <p class="adopt-hint">AVAILABLE AT PARTICIPATING NURSERIES</p>
</section>

<!-- FOOTER RATING -->
<footer class="footer-rating" id="footerRating">
  <div class="fr-form" id="frForm">
    <div class="fr-title">How was your experience?</div>
    <div class="fr-stars" id="frStars">
      <button class="fr-star" onclick="setFrStar(1)">â­</button>
      <button class="fr-star" onclick="setFrStar(2)">â­</button>
      <button class="fr-star" onclick="setFrStar(3)">â­</button>
      <button class="fr-star" onclick="setFrStar(4)">â­</button>
      <button class="fr-star" onclick="setFrStar(5)">â­</button>
    </div>
    <textarea class="fr-input" id="frText" placeholder="Share your thoughtsâ€¦ ğŸŒ¿" rows="3"></textarea>
    <button class="fr-submit" onclick="submitFooterRating()">Send Feedback ğŸŒ±</button>
  </div>
  <div class="fr-thanks" id="frThanks">
    <div class="fr-thanks-ico">ğŸ’°</div>
    <div class="fr-thanks-title">Thank You!</div>
    <div class="fr-thanks-sub">Your feedback helps us grow, just like a Money Plant in fresh water ğŸƒ</div>
  </div>
</footer>

<!-- ADOPT MODAL -->
<div class="modal-wrap" id="adoptModal" onclick="closeAdoptByBg(event)">
  <div class="modal-box" onclick="event.stopPropagation()">
    <div class="modal-ico">ğŸŒ±</div>
    <div class="modal-title">Coming Soon!</div>
    <p class="modal-body">Online adoption is being rooted.<br>Visit your nearest nursery carrying<br><strong style="color:white;">Urban Farmer</strong> plants to bring Money Plant home today!</p>
    <div class="modal-brand">BY AGRON GREENTECH</div>
    <button class="modal-close" onclick="closeAdopt()">Got it! ğŸƒ</button>
  </div>
</div>

<!-- CHAT BACKDROP -->
<div class="chat-backdrop" id="chatBackdrop" onclick="closeChat()"></div>

<!-- CHAT PANEL -->
<div class="chat-panel" id="chatPanel">
  <div class="chat-handle-bar"></div>
  <div class="chat-phead">
    <div class="chat-pav">ğŸƒ</div>
    <div>
      <div class="chat-pname">Money Plant</div>
      <div class="chat-pstatus"><span class="pstatus-dot"></span> Ready to help</div>
    </div>
    <button class="chat-close" onclick="closeChat()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
    </button>
  </div>
  <div class="chat-msgs" id="chatMsgs">
    <div class="cmsg bot">
      <div class="cmsg-av">ğŸƒ</div>
      <div class="cmsg-bbl">Hello! ğŸƒ I am Money Plant â€” your lucky, low-maintenance fortune vine. What would you like to know about growing me?</div>
    </div>
  </div>
  <div class="quick-qs" id="quickQs">
    <button class="qq" onclick="sendQQ(this)">Grow in water? ğŸ’§</button>
    <button class="qq" onclick="sendQQ(this)">Low light tips ğŸŒ‘</button>
    <button class="qq" onclick="sendQQ(this)">Yellow leaves?</button>
    <button class="qq" onclick="sendQQ(this)">How to propagate? âœ‚ï¸</button>
    <button class="qq" onclick="sendQQ(this)">Vastu placement ğŸ’°</button>
    <button class="qq" onclick="sendQQ(this)">Bring back gold leaves âœ¨</button>
  </div>
  <div class="chat-input-row">
    <textarea class="chat-inp" id="chatInp" placeholder="Ask Money Plant anythingâ€¦" rows="1"
      onkeydown="chatKey(event)" oninput="resizeInp(this)"></textarea>
    <button class="chat-send" id="chatSendBtn" onclick="sendChat()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
    </button>
  </div>
</div>

<!-- FLOATING CHAT BUTTON -->
<button class="chat-fab" id="chatFab" onclick="openChat()" aria-label="Chat with Money Plant">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
  </svg>
  <div class="fab-badge"></div>
</button>

<!-- SVG ICONS -->
<svg style="display:none" id="iconSprite">
  <symbol id="i-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/></symbol>
  <symbol id="i-drop" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></symbol>
  <symbol id="i-thermo" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 14.76V3.5a2.5 2.5 0 0 0-5 0v11.26a4.5 4.5 0 1 0 5 0z"/></symbol>
  <symbol id="i-wind" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"/></symbol>
  <symbol id="i-alert" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></symbol>
  <symbol id="i-leaf" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></symbol>
  <symbol id="i-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></symbol>
  <symbol id="i-snow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="2" x2="12" y2="22"/><path d="M17 5l-5 5-5-5"/><path d="M17 19l-5-5-5 5"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M5 7l5 5-5 5"/><path d="M19 7l-5 5 5 5"/></symbol>
  <symbol id="i-cut" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="6" cy="6" r="3"/><circle cx="6" cy="18" r="3"/><line x1="20" y1="4" x2="8.12" y2="15.88"/><line x1="14.47" y1="14.48" x2="20" y2="20"/><line x1="8.12" y1="8.12" x2="12" y2="12"/></symbol>
  <symbol id="i-seed" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 20h10M10 20c5.5-2.5.8-6.4 3-10"/><path d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"/><path d="M14.1 6a7 7 0 0 1 5.2 7.7 4.8 4.8 0 0 1-5.7-5.8A4.1 4.1 0 0 0 14 6z"/></symbol>
  <symbol id="i-bug" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 2l1.88 1.88M14.12 3.88 16 2M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"/><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6z"/><path d="M12 20v-9M6.53 9C4.6 8.8 3 7.1 3 5M6 13H2M3 21c0-2.1 1.7-3.9 4-4M17.47 9C19.4 8.8 21 7.1 21 5M18 13h4M21 21c0-2.1-1.7-3.9-4-4"/></symbol>
  <symbol id="i-flower" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 2a4 4 0 0 1 4 4 4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1-4-4 4 4 0 0 1 4-4 4 4 0 0 1 4-4z"/></symbol>
  <symbol id="i-hands" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 11V6a2 2 0 0 0-4 0v0M14 11V4a2 2 0 0 0-4 0v3M10 10.5V6a2 2 0 0 0-4 0v8"/><path d="M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/></symbol>
  <symbol id="i-home" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></symbol>
  <symbol id="i-shield" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></symbol>
  <symbol id="i-cup" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8z"/><line x1="6" y1="2" x2="6" y2="4"/><line x1="10" y1="2" x2="10" y2="4"/><line x1="14" y1="2" x2="14" y2="4"/></symbol>
  <symbol id="i-star" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></symbol>
  <symbol id="i-refresh" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></symbol>
  <symbol id="i-heart" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></symbol>
  <symbol id="i-search" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></symbol>
  <symbol id="i-play" viewBox="0 0 24 24" fill="currentColor"><polygon points="5 3 19 12 5 21 5 3"/></symbol>
  <symbol id="i-pause" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></symbol>
  <symbol id="i-mute" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></symbol>
  <symbol id="i-vol" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/></symbol>
  <symbol id="i-thriving" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M12 2a4 4 0 0 1 4 4 4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1-4-4 4 4 0 0 1 4-4 4 4 0 0 1 4-4z"/></symbol>
  <symbol id="i-wilting" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22V12"/><path d="M12 12C12 7 7 3 3 3c0 5 3.5 8.5 9 9z"/><path d="M12 12c0-5 5-9 9-9-1 5-4 8-9 9z"/><path d="M9 17c-2 0-4-1-5-3"/></symbol>
  <symbol id="i-diseased" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></symbol>
  <symbol id="i-dormant" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></symbol>
  <symbol id="i-loved" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></symbol>
  <symbol id="i-water" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></symbol>
  <symbol id="i-vastu" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></symbol>
</svg>

<script>
function svg(id, size='16') {
  return `<svg width="${size}" height="${size}" style="display:inline-flex;flex-shrink:0;"><use href="#${id}"/></svg>`;
}

const MOODS = [
  {
    id:'thriving', pill:'Thriving', icon:'i-thriving', color:'#2e7d44',
    cls:'emo-happy', video:'moneyplant_happy.mp4',
    label:'Thriving & Lush',
    ctx:'Give me bright indirect light, water when the topsoil feels dry, and a monthly dose of liquid fertiliser â€” I\'ll reward you with lush, heart-shaped leaves everywhere!',
    tips:[
      {icon:'i-sun',   bg:'#edfaf0',c:'#2e7d44', t:'<strong>Light:</strong> Bright indirect light for best variegation. Avoid harsh afternoon sun.'},
      {icon:'i-drop',  bg:'#e8f2ff',c:'#3a7fc1', t:'<strong>Water:</strong> Only when top 2 inches of soil are dry. Overwatering is my #1 killer!'},
      {icon:'i-leaf',  bg:'#f6fde8',c:'#5a9010', t:'<strong>Soil:</strong> Well-draining potting mix with perlite. Never let roots sit in water.'},
      {icon:'i-seed',  bg:'#fdf8e0',c:'#c07000', t:'<strong>Feed:</strong> Liquid NPK (10-10-10) diluted to half-strength once a month in summer.'},
      {icon:'i-wind',  bg:'#e8f8ff',c:'#3a90c1', t:'<strong>Humidity:</strong> Mist leaves weekly or place on a pebble tray with water.'},
    ]
  },
  {
    id:'overwatered', pill:'Overwatered', icon:'i-wilting', color:'#3a6090',
    cls:'emo-sad', video:'moneyplant_sad.mp4',
    label:'Overwatered & Sad',
    ctx:'Yellow, mushy leaves and a soggy smell â€” classic overwatering! I hate wet feet. My roots need oxygen just as much as water. Let me dry out between drinks!',
    tips:[
      {icon:'i-alert', bg:'#fce8e8',c:'#c14040', t:'<strong>SOS Signs:</strong> Yellow leaves, mushy stems, mouldy soil â€” stop watering immediately!'},
      {icon:'i-drop',  bg:'#e8f2ff',c:'#3a7fc1', t:'<strong>Fix:</strong> Remove from pot, let roots air dry 30 min, repot in dry fresh soil.'},
      {icon:'i-search',bg:'#f0ede8',c:'#8a6040', t:'<strong>Root Check:</strong> Brown/black mushy roots = root rot. Trim and dust with cinnamon powder.'},
      {icon:'i-leaf',  bg:'#f6fde8',c:'#5a9010', t:'<strong>Rule:</strong> Stick your finger 2 inches in soil. Dry? Water. Moist? Wait another 2 days.'},
    ]
  },
  {
    id:'leggy', pill:'Leggy & Pale', icon:'i-diseased', color:'#a04020',
    cls:'emo-angry', video:'moneyplant_grumpy.mp4',
    label:'Leggy & Light-Starved',
    ctx:'Long bare stems, tiny pale leaves, and faded variegation â€” I\'m desperately reaching for light! Low light makes me leggy and strips away my beautiful golden patches.',
    tips:[
      {icon:'i-alert', bg:'#fce8e8',c:'#c14040', t:'<strong>Signs:</strong> Long gaps between leaves, pale/all-green growth, drooping stems.'},
      {icon:'i-sun',   bg:'#fdf8e0',c:'#c07000', t:'<strong>Fix:</strong> Move me to a brighter spot. North-facing windows won\'t cut it for long.'},
      {icon:'i-cut',   bg:'#f0ede8',c:'#8a5020', t:'<strong>Prune:</strong> Cut back leggy stems just above a node â€” encourages bushy regrowth.'},
      {icon:'i-leaf',  bg:'#f6fde8',c:'#5a9010', t:'<strong>Rotate:</strong> Turn pot 90Â° every 2 weeks for even, balanced growth on all sides.'},
    ]
  },
  {
    id:'dormant', pill:'Winter Rest', icon:'i-dormant', color:'#5040a0',
    cls:'emo-sleepy', video:'moneyplant_sleepy.mp4',
    label:'Winter Rest Mode',
    ctx:'Novâ€“Jan I slow right down. Don\'t panic if I stop putting out new leaves. Reduce water, skip fertiliser, and keep me away from cold drafts.',
    tips:[
      {icon:'i-drop',  bg:'#e8f2ff',c:'#3a7fc1', t:'<strong>Reduce Water:</strong> Once every 10â€“14 days is enough. Roots are barely active.'},
      {icon:'i-seed',  bg:'#fdf8e0',c:'#c07000', t:'<strong>Skip Feed:</strong> No fertiliser from Nov to Feb â€” unused nutrients will damage roots.'},
      {icon:'i-snow',  bg:'#f0ede8',c:'#8a5020', t:'<strong>Cold Alert:</strong> Keep above 10Â°C. Cold windows and A/C drafts cause leaf drop.'},
      {icon:'i-sun',   bg:'#edfaf0',c:'#2e7d44', t:'<strong>Still Need Light:</strong> Even resting, keep me in a bright spot to maintain variegation.'},
    ]
  },
  {
    id:'waterjar', pill:'Water Jar', icon:'i-water', color:'#3a7fc1',
    cls:'emo-loved', video:'moneyplant_loved.mp4',
    label:'Happy in Water',
    ctx:'Did you know I can live entirely in water? A clean glass jar, a healthy cutting, weekly water change â€” I\'ll root and grow for years without a drop of soil!',
    tips:[
      {icon:'i-drop',  bg:'#e8f2ff',c:'#3a7fc1', t:'<strong>Setup:</strong> Cut just below a node. Remove lower leaves. Place in glass jar with clean water.'},
      {icon:'i-refresh',bg:'#e8f8ee',c:'#2e7d44', t:'<strong>Water Change:</strong> Replace with fresh water every 5â€“7 days to prevent algae and rot.'},
      {icon:'i-sun',   bg:'#fdf8e0',c:'#c07000', t:'<strong>Light:</strong> Keep jar in bright indirect light. Direct sun heats water and grows algae fast.'},
      {icon:'i-seed',  bg:'#edfaf0',c:'#2e7d44', t:'<strong>Feed:</strong> Add a single drop of liquid fertiliser to the water once a month.'},
      {icon:'i-home',  bg:'#f0ede0',c:'#7a5030', t:'<strong>DÃ©cor Tip:</strong> Use coloured stones or marbles at the base â€” stunning and keeps stems upright!'},
    ]
  },
  {
    id:'propagating', pill:'Propagating', icon:'i-leaf', color:'#1a7a40',
    cls:'emo-calm', video:'moneyplant_calm.mp4',
    label:'Easy Propagation',
    ctx:'One plant can become ten in a matter of weeks. I propagate with zero fuss â€” just a stem cutting, a glass of water, and some patience. Share the fortune!',
    tips:[
      {icon:'i-cut',   bg:'#edfaf0',c:'#2e7d44', t:'<strong>Cut Right:</strong> Snip a 10â€“15cm stem just below a node using clean scissors or knife.'},
      {icon:'i-drop',  bg:'#e8f2ff',c:'#3a7fc1', t:'<strong>Root in Water:</strong> Place in a glass of water with 2â€“3 nodes submerged. Roots in 10â€“14 days!'},
      {icon:'i-leaf',  bg:'#f6fde8',c:'#5a9010', t:'<strong>Plant Out:</strong> Once roots are 2â€“3cm long, pot into moist cocopeat-soil mix.'},
      {icon:'i-heart', bg:'#fce8f0',c:'#b02060', t:'<strong>Gift Idea:</strong> A rooted cutting in a pretty jar makes a meaningful, lucky gift! ğŸ’š'},
    ]
  },
  {
    id:'vastu', pill:'Vastu Mode', icon:'i-vastu', color:'#c8a020',
    cls:'emo-thrive', video:'moneyplant_thrive.mp4',
    label:'Vastu & Feng Shui',
    ctx:'I am the most recommended plant in Vastu Shastra! Placed correctly, I attract prosperity, remove negative energy, and activate wealth zones in your home.',
    tips:[
      {icon:'i-vastu', bg:'#fdf8e0',c:'#c07000', t:'<strong>Best Corner:</strong> South-east (Agneya) corner is the wealth zone â€” I flourish here!'},
      {icon:'i-home',  bg:'#f0ede0',c:'#7a5030', t:'<strong>Living Room:</strong> Keep me in the main hall or near the main door â€” brings positive energy.'},
      {icon:'i-alert', bg:'#fce8e8',c:'#c14040', t:'<strong>Avoid:</strong> North-east corner or bedroom â€” Vastu says this can create negative energy.'},
      {icon:'i-star',  bg:'#fdf8e0',c:'#c07000', t:'<strong>Lucky 5:</strong> 5 braided stems in a single pot = 5 feng shui elements. Most auspicious!'},
      {icon:'i-hands', bg:'#edfaf0',c:'#2e7d44', t:'<strong>Never Let Wilt:</strong> A wilting money plant is considered a bad omen. Keep it healthy!'},
    ]
  }
];

let curSlide = 0;
let globalMuted = true;

function buildCarousel() {
  const pillStrip = document.getElementById('pillStrip');
  const track = document.getElementById('carouselTrack');
  const dots = document.getElementById('cdots');

  MOODS.forEach((m, i) => {
    const pill = document.createElement('button');
    pill.className = 'mpill' + (i === 0 ? ' active' : '');
    pill.innerHTML = `${svg(m.icon,'15')}<span>${m.pill}</span>`;
    pill.addEventListener('click', () => goTo(i));
    pillStrip.appendChild(pill);

    const slide = document.createElement('div');
    slide.className = 'cslide';

    const tips = m.tips.map(t => `
      <div class="tip-row">
        <div class="tip-ico" style="background:${t.bg};">
          <svg width="13" height="13" style="color:${t.c};display:block;"><use href="#${t.icon}"/></svg>
        </div>
        <div class="tip-txt">${t.t}</div>
      </div>`).join('');

    slide.innerHTML = `
      <div class="mcard">
        <div class="mmedia ${m.cls}" id="mm-${i}" onclick="tapMedia(${i})">
          <div class="mmedia-bg">
            <div style="text-align:center;position:relative;z-index:1;">
              <svg width="36" height="36" style="opacity:.22;color:${m.color};display:block;margin:0 auto 8px;"><use href="#${m.icon}"/></svg>
              <p class="media-placeholder-txt">Place <strong>${m.pill} Money Plant</strong><br>video here</p>
            </div>
          </div>
          <video id="v-${i}" playsinline muted preload="metadata"></video>
          <div class="vcontrols" id="vc-${i}">
            <button class="vcbtn pause-btn" id="pcbtn-${i}" onclick="togglePause(event,${i})">
              ${svg('i-pause','14')}
            </button>
            <div class="vprogress-wrap" onclick="seekV(event,${i})">
              <div class="vprogress-bar" id="vp-${i}"></div>
            </div>
            <button class="vcbtn" id="mbtn-${i}" onclick="toggleMute(event,${i})">
              ${svg('i-mute','14')}
            </button>
          </div>
        </div>
        <div class="mcard-body">
          <div class="mcard-title">
            <svg width="20" height="20" style="color:${m.color};flex-shrink:0;"><use href="#${m.icon}"/></svg>
            ${m.label}
          </div>
          <p class="mcard-ctx">${m.ctx}</p>
          <div class="tips-list">${tips}</div>
        </div>
      </div>`;

    track.appendChild(slide);

    const dot = document.createElement('div');
    dot.className = 'cdot' + (i === 0 ? ' active' : '');
    dot.addEventListener('click', () => goTo(i));
    dots.appendChild(dot);

    const vid = document.getElementById(`v-${i}`);
    if (m.video) {
      const s = document.createElement('source');
      s.src = m.video; s.type = 'video/mp4';
      vid.appendChild(s);
      vid.load();
      vid.addEventListener('loadedmetadata', () => {
        vid.currentTime = 0.001;
        document.getElementById(`mm-${i}`).classList.add('has-video');
      });
      vid.addEventListener('timeupdate', () => {
        const bar = document.getElementById(`vp-${i}`);
        if (bar && vid.duration) bar.style.width = (vid.currentTime / vid.duration * 100) + '%';
      });
      vid.addEventListener('ended', () => { pauseSlide(i); vid.currentTime = 0.001; });
    }
  });
}

function goTo(idx) {
  pauseSlide(curSlide);
  curSlide = idx;
  document.getElementById('carouselTrack').style.transform = `translateX(calc(-${idx} * 100vw))`;
  document.querySelectorAll('.mpill').forEach((p, i) => p.classList.toggle('active', i === idx));
  document.querySelectorAll('.cdot').forEach((d, i) => d.classList.toggle('active', i === idx));
  const pillEl = document.querySelectorAll('.mpill')[idx];
  if (pillEl) pillEl.scrollIntoView({ behavior:'smooth', inline:'center', block:'nearest' });
  setTimeout(() => autoPlay(idx), 420);
}

function autoPlay(idx) {
  const vid = document.getElementById(`v-${idx}`);
  if (!vid || !vid.querySelector('source')) return;
  vid.muted = globalMuted;
  updateMuteBtn(idx, globalMuted);
  vid.play().then(() => setPlaying(idx, true)).catch(() => {});
}

function pauseSlide(idx) {
  const vid = document.getElementById(`v-${idx}`);
  if (vid) vid.pause();
  setPlaying(idx, false);
}

function tapMedia(idx) {
  const mm = document.getElementById(`mm-${idx}`);
  const vid = document.getElementById(`v-${idx}`);
  if (!vid) return;
  mm.classList.add('show-ctrl');
  clearTimeout(mm._ct);
  mm._ct = setTimeout(() => mm.classList.remove('show-ctrl'), 2500);
  if (vid.paused) {
    vid.play().then(() => setPlaying(idx, true)).catch(() => {});
  } else {
    vid.pause();
    mm.classList.add('paused-once');
    setPlaying(idx, false);
  }
}

function togglePause(e, idx) { e.stopPropagation(); tapMedia(idx); }

function toggleMute(e, idx) {
  e.stopPropagation();
  const vid = document.getElementById(`v-${idx}`);
  if (!vid) return;
  globalMuted = !globalMuted;
  vid.muted = globalMuted;
  updateMuteBtn(idx, globalMuted);
}

function seekV(e, idx) {
  const vid = document.getElementById(`v-${idx}`);
  if (!vid || !vid.duration) return;
  const r = e.currentTarget.getBoundingClientRect();
  vid.currentTime = ((e.clientX - r.left) / r.width) * vid.duration;
}

function setPlaying(idx, playing) {
  const mm = document.getElementById(`mm-${idx}`);
  if (!mm) return;
  mm.classList.toggle('playing', playing);
  if (playing) mm.classList.remove('paused-once');
  const pcbtn = document.getElementById(`pcbtn-${idx}`);
  if (pcbtn) pcbtn.innerHTML = svg(playing ? 'i-pause' : 'i-play', '14');
}

function updateMuteBtn(idx, muted) {
  const btn = document.getElementById(`mbtn-${idx}`);
  if (btn) btn.innerHTML = svg(muted ? 'i-mute' : 'i-vol', '14');
}

let tx = 0, ty = 0;

document.addEventListener('DOMContentLoaded', () => {
  buildCarousel();

  const o = document.getElementById('carouselOuter');
  o.addEventListener('touchstart', e => { tx = e.touches[0].clientX; ty = e.touches[0].clientY; }, {passive:true});
  o.addEventListener('touchend', e => {
    const dx = e.changedTouches[0].clientX - tx;
    const dy = e.changedTouches[0].clientY - ty;
    if (Math.abs(dx) > Math.abs(dy) && Math.abs(dx) > 44) {
      if (dx < 0 && curSlide < MOODS.length - 1) goTo(curSlide + 1);
      else if (dx > 0 && curSlide > 0) goTo(curSlide - 1);
    }
  }, {passive:true});

  const iobs = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        autoPlay(curSlide);
      } else {
        MOODS.forEach((_, i) => pauseSlide(i));
      }
    });
  }, {threshold: 0.3});
  iobs.observe(o);

  const sobs = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.querySelectorAll('.stat-fill').forEach(f => f.style.width = f.dataset.w + '%');
        sobs.unobserve(e.target);
      }
    });
  }, {threshold:.3});
  document.querySelectorAll('.stat-list').forEach(el => sobs.observe(el));

  const fobs = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) {
        e.target.querySelectorAll('.fact-card').forEach(c => c.classList.add('vis'));
        fobs.unobserve(e.target);
      }
    });
  }, {threshold:.12});
  document.querySelectorAll('.fact-list').forEach(el => fobs.observe(el));
});

window.addEventListener('load', () => {
  fetch('/api/visit', {
    method: 'POST', headers: {'Content-Type':'application/json'},
    body: JSON.stringify({page: window.location.pathname, referrer: document.referrer})
  }).catch(() => {});
});

let chatOpen = false, chatTyping = false;
let chatHist = [];
const CHAT_API = '/api/chat';

function openChat() {
  chatOpen = true;
  document.getElementById('chatPanel').classList.add('open');
  document.getElementById('chatBackdrop').classList.add('show');
  document.getElementById('chatFab').style.display = 'none';
  document.body.style.overflow = 'hidden';
  setTimeout(() => document.getElementById('chatInp').focus(), 400);
}

function closeChat() {
  chatOpen = false;
  document.getElementById('chatPanel').classList.remove('open');
  document.getElementById('chatBackdrop').classList.remove('show');
  document.getElementById('chatFab').style.display = '';
  document.body.style.overflow = '';
}

function resizeInp(el) {
  el.style.height = 'auto';
  el.style.height = Math.min(el.scrollHeight, 96) + 'px';
}

function chatKey(e) {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendChat(); }
}

function sendQQ(btn) {
  document.getElementById('chatInp').value = btn.textContent.replace(/[ğŸ’§ğŸŒ‘âœ‚ï¸ğŸ’°âœ¨]/g,'').trim();
  document.getElementById('quickQs').style.display = 'none';
  sendChat();
}

async function sendChat() {
  if (chatTyping) return;
  const inp = document.getElementById('chatInp');
  const text = inp.value.trim();
  if (!text) return;
  inp.value = ''; inp.style.height = 'auto';
  document.getElementById('quickQs').style.display = 'none';
  addMsg('user', text);
  chatHist.push({role:'user', content:text});
  showTyping();
  try {
    const res = await fetch(CHAT_API, {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({messages: chatHist})
    });
    if (!res.ok) throw new Error();
    const d = await res.json();
    const reply = d.choices?.[0]?.message?.content || 'I\'m resting like in winterâ€¦ please try again! ğŸŒ¿';
    removeTyping(); addMsg('bot', reply);
    chatHist.push({role:'assistant', content:reply});
    if (chatHist.length > 14) chatHist = chatHist.slice(-14);
  } catch {
    removeTyping();
    addMsg('bot', 'My vines are tangled â€” couldn\'t connect right now. Please try again! ğŸƒ');
  }
}

function addMsg(role, text) {
  const box = document.getElementById('chatMsgs');
  const d = document.createElement('div');
  d.className = `cmsg ${role}`;
  d.innerHTML = `<div class="cmsg-av">${role==='bot'?'ğŸƒ':'ğŸ‘¤'}</div><div class="cmsg-bbl">${text.replace(/\n/g,'<br>')}</div>`;
  box.appendChild(d);
  box.scrollTop = box.scrollHeight;
  chatTyping = false;
}

function showTyping() {
  chatTyping = true;
  const box = document.getElementById('chatMsgs');
  const d = document.createElement('div');
  d.className = 'cmsg bot'; d.id = 'typingDiv';
  d.innerHTML = `<div class="cmsg-av">ğŸª´</div><div class="cmsg-bbl"><div class="typing-dots"><span></span><span></span><span></span></div></div>`;
  box.appendChild(d); box.scrollTop = box.scrollHeight;
  document.getElementById('chatSendBtn').disabled = true;
}

function removeTyping() {
  const t = document.getElementById('typingDiv');
  if (t) t.remove();
  document.getElementById('chatSendBtn').disabled = false;
  chatTyping = false;
}

let frRating = 0;

function setFrStar(val) {
  frRating = val;
  document.querySelectorAll('.fr-star').forEach((s, i) => s.classList.toggle('lit', i < val));
}

async function submitFooterRating() {
  if (frRating === 0) { alert('Please tap a star! â­'); return; }
  try {
    await fetch('/api/feedback', {
      method: 'POST', headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ overallRating: frRating, feedbackText: document.getElementById('frText').value.trim() })
    });
  } catch {}
  document.getElementById('frForm').style.display = 'none';
  const t = document.getElementById('frThanks');
  t.style.display = 'flex';
}

function openAdopt() {
  fetch('/api/adopt-click', {method:'POST',headers:{'Content-Type':'application/json'},body:'{}'}).catch(()=>{});
  document.getElementById('adoptModal').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}
function closeAdopt() {
  document.getElementById('adoptModal').style.display = 'none';
  document.body.style.overflow = '';
}
function closeAdoptByBg(e) {
  if (e.target === document.getElementById('adoptModal')) closeAdopt();
}
</script>
</body>
</html>